# === STEGVERSE FILE METADATA ===
# sv_file: scw/policy.yml
# sv_kind: policy
# sv_module: SCW
# sv_version: 4.0.0
# sv_build_id: 20251125-000000Z
# sv_epoch: 9
# sv_parent_build: none
# sv_hash: auto
# sv_sig: svmeta:v1
# === END STEGVERSE FILE METADATA ===

# Central SCW policy used by org-scan and autopatch.
policy_epoch: 9

min_versions:
  workflow: "4.0.0"
  scw_core: "4.0.0"

required_files:
  # Allowlisted structure files SCW may auto-add/replace.
  - path: ".github/workflows/scw_orchestrator.yml"
    kind: "workflow"
    module: "SCW"
    allow_autofix: true
    depends_on_secrets:
      - "GH_STEGVERSE_AI_TOKEN"
      - "GH_STEGVERSE_LABS_AI_TOKEN"

  - path: ".github/workflows/scw_core.yml"
    kind: "workflow"
    module: "SCW"
    allow_autofix: true
    depends_on_secrets:
      - "GH_STEGVERSE_AI_TOKEN"
      - "GH_STEGVERSE_LABS_AI_TOKEN"

  - path: "scw/file_index.json"
    kind: "index"
    module: "SCW"
    allow_autofix: true
    depends_on_secrets: []

structure_allowlist_globs:
  - ".github/workflows/**"
  - "scw/**"
  - "docs/scw/**"
  - "README.md"
  - "requirements.txt"

logic_allowlist_globs:
  # SCW does NOT auto-replace logic files unless explicitly allowlisted here.
  - "scw/**"   # SCW internal python is safe to patch

exclude_repos_globs:
  - "**/Patents"
  - "**/archive/**"
  - "**/deprecated/**"

scan:
  index_first: true
  deep_scan_globs:
    - ".github/workflows/**"
    - "scw/**"
  max_files_deep_scan: 250

risk:
  warn_score_threshold: 1.2
  stale_multiplier: 1.5
  high_usage_multiplier: 1.4
  failure_adjacent_multiplier: 1.3

tokens:
  rotation_policy_days: 90
  warn_before_days: 20
